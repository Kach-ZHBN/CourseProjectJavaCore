# Java Core. Финальный проект
#### Проект выполнен с усложненными заданиями. База данных проекта - PostgreSQL.
## Описание проекта

Программу создана для выполнения денежного перевода с одного счета на другой. 
Предварительно в программе находится CSV-файл с номерами счетов и суммами 
на них. При запуске программа ожидает ввода информации из консоли.

![image](https://github.com/Kach-ZHBN/CourseProjectJavaCore/assets/124609149/847c054b-b8ff-4116-9084-7936b346c458)

#### В консоль введено 1 - вызов операции парсинга файлов перевода из input.

При выборе функции парсинга программа парсит все txt-файлы из каталога ‘input’ и переносит распаршеные файлы в каталог ‘archive’. В результате парсинга файлов программа формирует/обновляет файл-отчет, обновляет информацию в файле с номерами счетов и суммами до актуальных а так же обновляет записи в БД.

#### В консоль введено 2 - вызов операции вывода списка всех переводов из файла-отчета.

При выборе функции вывода списка всех переводов программа выводит в консоль информации о всех переводах.

##### Структура перевода:

***При успешном выполнении перевода:***

дата-время | файл_1 | перевод с XXXXX-XXXXX на YYYYY-YYYYY 500 | успешно обработан

***При невозможности выполнения перевода:***

дата-время | файл_1 | перевод с XXXXX-XXXXX на YYYYY-YYYYY -100 | ошибка во время обработки, неверная сумма перевода

![image](https://github.com/Kach-ZHBN/CourseProjectJavaCore/assets/124609149/ad815523-8ce8-48ab-8052-836016ed0d3d)

#### В консоль введено 3 - вызов операции вывода списка всех переводов из файла-отчета по датам с ... по ... .

При выборе функции вывода списка всех переводов по датам программа ожидает ввода дат и выводит в консоль информации о всех переводах в заданном диапазоне дат.

![image](https://github.com/Kach-ZHBN/CourseProjectJavaCore/assets/124609149/b64cd43c-b64c-4fe4-ab65-f0bc57d8ebd6)

## Детали технической реализации

**Transaction** - основной объект, на котором построена логика работы программы. Содержит в себе всю информацию перевода.

- Основные значения, которые необходимы для запуска транзакции:
	- _fileName_ - имя распаршенного файла. Содержит имя файла-источника на основании которого создана транзакция.
	- _accountNumberFrom_ - номер счета-отправителя. Поле может быть пустым.
	- _accountNumberTo_ - номер счета-получателя. Поле может быть пустым.
	- _amount_ - сумма для перевода. По умолчанию - '0'.
- Значения, которые заполняются во время запуска транзакции:
	- _dateOfTransaction_ - время выполнения транзакции. Содержит в себе время выполнения удачной/неудачной транзакции.
	- _transactionSuccess_ - успех выполнения транзакции. При корректности номера счета отправителя, номера счета получателя и суммы, данное поле принимает значение 'true'. При невозможности выполнения транзакции - 'false'.
	- _errorMassages_- сообщение ошибки. В сообщение указывается причина, по которой невозможно выполнить транзакцию.

При запуске транзакции проверяется возможность ее выполнения (банковские счета существуют, валидное значение суммы для перевода, на счете-отправителе имеются средства для списания.  
	Если транзакция возможна, то происходит перевод между счетами с обновлением информации в БД и файле со счетами.  
    Если транзакция невозможна, происходит заполнение сообщения ошибки.  
    В обоих случаях добавляется запись транзакции в БД.

**BankAccount** - объект, представляющий из себя банковский счет. Содержит в себе номер и количество средств.

**InputParser** - объект, который парсит .txt-файлы из папки 'input' и возвращает список транзакций для выполнения. 

- Формат входных файлов: txt. 
- Файлы должны содержать поля: 
	- Номер счета с (10 цифр ХХХХХ-ХХХХХ); 
	- Номер счета на (10 цифр ХХХХХ-ХХХХХ); 
	- Сумма для перевода (вещественное значение, разделителем может быть '.' и ',')
- Входной файл может содержать любое количество других полей, но во время обработки файла получается информация только из трех вышеописанных (с помощью регулярных выражений).

Распаршенные файлы переносятся в каталог 'archive'. Файлы с невалидным расширением остаются нетронутыми.

**Доступ к БД** осуществляется с помощью объектов. Соединение с БД установлено через класс-синглтон **DBConnection**
- BankAccountDAO - DAO, в котором инкапуслирована логика взаимодействия с банковскими счетами в базе данных.
- TransactionDAO - DAO, в котором инкапуслирована логика взаимодействия с тразакциями в базе данных

Таблица банковских счетов в базе данных:
```sql
 create table BankAccount(
 id int GENERATED BY DEFAULT AS IDENTITY,
 number varchar,
 amount numeric
 )
```
![image](https://github.com/Kach-ZHBN/CourseProjectJavaCore/assets/124609149/67e017bd-5db2-403e-93c2-1a14173de953)

Таблица транзакций в базе данных:
```sql
 create table Transaction(
 id int GENERATED BY DEFAULT AS IDENTITY,
 date timestamp without time zone,
 file varchar,
 accountNumberFrom varchar,
 accountNumberTo varchar,
 amount numeric,
 transactionSuccess boolean,
 errorMassages varchar
 )
```
![image](https://github.com/Kach-ZHBN/CourseProjectJavaCore/assets/124609149/8d8102e0-9159-4298-9944-4bf9ff00b17e)

## Диаграмма классов с описанием зависимостей одних классов от других
![image](https://github.com/Kach-ZHBN/CourseProjectJavaCore/assets/124609149/be564db7-8c5d-44b5-a366-03a8b2654367)
